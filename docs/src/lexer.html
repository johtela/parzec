
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>
            parzec - Lexical Analyzer
        </title>
        <link rel="icon" type="image/icon" href="../images/favicon.svg" />
        <link rel="stylesheet" href="../dist/normal.css" />
        
    </head>
    <body data-syntax-highlight="monokai"
        data-theme="purple-rain">
        
        <div id="navbar">
            
    <div class="navmenu ">
        
    <div class="navitem " >
        <a class="title enabled" href="../index.html" >
            <img src="../images/millenniumfalcon_88882.svg" />
            <span>parzec</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://www.npmjs.com/package/parzec" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-npm" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M1 8h22v7h-12v2h-4v-2h-6z" />
            <path d="M7 8v7" />
            <path d="M14 8v7" />
            <path d="M17 11v4" />
            <path d="M4 11v4" />
            <path d="M11 11v1" />
            <path d="M20 11v4" />
        </svg>
            <span>Download</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://github.com/johtela/parzec" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
        </svg>
            <span>GitHub</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Syntax Highlight</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="coding-horror">
        <a   onclick="document.body.syntaxHighlight('coding-horror')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Coding Horror</span>
        </a>
        
    </div>
    <div class="navitem active" id="monokai">
        <a   onclick="document.body.syntaxHighlight('monokai')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Monokai</span>
        </a>
        
    </div>
    <div class="navitem " id="solarized-light">
        <a   onclick="document.body.syntaxHighlight('solarized-light')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Solarized Light</span>
        </a>
        
    </div>
    <div class="navitem " id="son-of-obsidian">
        <a   onclick="document.body.syntaxHighlight('son-of-obsidian')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Son of Obsidian</span>
        </a>
        
    </div>
    </div>
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Theme</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="blueberry">
        <a   onclick="document.body.theme('blueberry')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Blueberry</span>
        </a>
        
    </div>
    <div class="navitem " id="book-cover">
        <a   onclick="document.body.theme('book-cover')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Book Cover</span>
        </a>
        
    </div>
    <div class="navitem " id="brownie">
        <a   onclick="document.body.theme('brownie')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Brownie</span>
        </a>
        
    </div>
    <div class="navitem " id="chocolate">
        <a   onclick="document.body.theme('chocolate')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Chocolate</span>
        </a>
        
    </div>
    <div class="navitem " id="ice-age">
        <a   onclick="document.body.theme('ice-age')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ice Age</span>
        </a>
        
    </div>
    <div class="navitem " id="monotone">
        <a   onclick="document.body.theme('monotone')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Monotone</span>
        </a>
        
    </div>
    <div class="navitem " id="mustard">
        <a   onclick="document.body.theme('mustard')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Mustard</span>
        </a>
        
    </div>
    <div class="navitem " id="peachy">
        <a   onclick="document.body.theme('peachy')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Peachy</span>
        </a>
        
    </div>
    <div class="navitem " id="red-alert">
        <a   onclick="document.body.theme('red-alert')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Red Alert</span>
        </a>
        
    </div>
    <div class="navitem " id="ultra-violet">
        <a   onclick="document.body.theme('ultra-violet')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ultra Violet</span>
        </a>
        
    </div>
    <div class="navitem " id="vintage">
        <a   onclick="document.body.theme('vintage')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Vintage</span>
        </a>
        
    </div>
    </div>
    </div>
    </div>
            
    <a class="hamburger">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </a>
        </div>
        
        <div class="layout">
            <div class="sidepane narrow-scrollbars">
                
        <div class="tocmenu">
            <h3>Table of Contents</h3>
            
    <ul>
        
    <li>
        <a href="../README.html"><span>📔</span>Introduction</a>
    </li>
    <li>
        
    <div class="accordion">
        Examples
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="test/exprparser.html"><span>📔</span>Parsing Arithmetic Epressions</a>
    </li>
    <li>
        <a href="test/exprtests.html"><span>📔</span>Testing the Expression Parser</a>
    </li>
    <li>
        <a href="test/jsonparser.html"><span>📔</span>Parsing JSON</a>
    </li>
    <li>
        <a href="test/jsontests.html"><span>📔</span>Testing the JSON Parser</a>
    </li>
    </ul>
    </li>
    <li>
        
    <div class="accordion">
        Implementation
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="index.html"><span>📔</span>Library Structure</a>
    </li>
    <li>
        <a href="input.html"><span>📔</span>Parser Input</a>
    </li>
    <li>
        <a href="result.html"><span>📔</span>Parser Result</a>
    </li>
    <li>
        <a href="error.html"><span>📔</span>Error Reporting</a>
    </li>
    <li>
        <a href="ref.html"><span>📔</span>Reference Cells</a>
    </li>
    <li>
        <a href="lexer.html" class="highlight"><span>📔</span>Lexical Analyzer</a>
    </li>
    <li>
        <a href="parser.html"><span>📔</span>Parser Monad and Combinators</a>
    </li>
    <li>
        <a href="arrayparsers.html"><span>📔</span>Parsing Arrays and Expressions</a>
    </li>
    <li>
        <a href="utils.html"><span>📔</span>Utility Functions</a>
    </li>
    </ul>
    </li>
    <li>
        <a href="../license.html"><span>📔</span>License</a>
    </li>
    </ul>
        </div>
                <div class="toc-button"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M7 7l5 5l-5 5" />
            <path d="M13 7l5 5l-5 5" />
        </svg></div>
            </div>
            
        <div class="contentarea closepopups">
            <h1 id="lexical-analyzer">Lexical Analyzer</h1>
<p><a href="https://en.wikipedia.org/wiki/Lexical_analysis">Lexical analyzer</a>, also known as lexer or scanner, is a program that
converts sequence of characters into a sequence of <em>tokens</em>. It simplifies
and speeds up parsing because the parser does not have to recognize low level
patterns such as whitespace, keywords, identifiers, or numbers. Instead, the
parser can focus on the high level grammar and structure of the input.</p>
<p>A lexer is usually implemented using a <a href="https://en.wikipedia.org/wiki/Deterministic_finite_automaton">deterministic finite automaton</a>,
and the DFA is typically represented by a regular expression. This is a
natural choice for us too, as Javascript natively supports them.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="817" data-toggle="tooltip" data-title="typeof inp">inp</span> <span class="keyword">from</span> <span class="string">&quot;./input&quot;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="849" data-toggle="tooltip" data-title="typeof utils">utils</span> <span class="keyword">from</span> <span class="string">&quot;./utils&quot;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="883" data-toggle="tooltip" data-title="typeof err">err</span> <span class="keyword">from</span> <span class="string">&quot;./error&quot;</span>
</code></pre>
<h2 id="recognizing-a-token">Recognizing a Token</h2>
<p>The mapping from regular expressions to tokens is defined using the
<code>TokenMatcher&lt;S&gt;</code> interface. A token can be of any type <code>S</code>, although usually
an enumeration is used.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">interface</span> <span id="907" class="typename" data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">TokenMatcher</span><span class="punctuation">&lt;</span><span id="1160" class="typename" data-toggle="tooltip" data-title="S">S</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span id="1164" data-toggle="tooltip" data-title="RegExp">regex</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="RegExp">RegExp</span>
    <span id="1183" data-toggle="tooltip" data-title="S">token</span><span class="punctuation">:</span> <a href="lexer.html#1160"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a>
<span class="punctuation">}</span>
</code></pre>
<h2 id="representing-a-token">Representing a Token</h2>
<p>When a token is recognized it is wrapped in a <code>Token&lt;S&gt;</code> object. This
contains also the recognized string for error reporting and diagnostics.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">class</span> <span id="1200" class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span><span class="punctuation">&lt;</span><span id="1416" class="typename" data-toggle="tooltip" data-title="S">S</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">constructor</span><span class="punctuation">(</span><span class="keyword">readonly</span> <span id="1438" data-toggle="tooltip" data-title="S">token</span><span class="punctuation">:</span> <a href="lexer.html#1416"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">,</span> <span class="keyword">readonly</span> <span id="1456" data-toggle="tooltip" data-title="string">text</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span> <span class="punctuation">}</span>
</code></pre>
<p>We override the <code>toString</code> function so we can output a token
to screen.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="1483" class="member" data-toggle="tooltip" data-title="() =&gt; string | S">toString</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1456"><span data-toggle="tooltip" data-title="string">text</span></a> <span class="punctuation">?</span> <a href="lexer.html#849"><span data-toggle="tooltip" data-title="typeof utils">utils</span></a><span class="punctuation">.</span><a href="utils.html#463"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; string">escapeWhitespace</span></a><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1456"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">)</span> <span class="punctuation">:</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1438"><span data-toggle="tooltip" data-title="S">token</span></a>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="lexer">Lexer</h2>
<p>The lexer itself is a simple class that contains all the TokenMatchers and
recognizes the next token in a string.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">class</span> <span id="1693" class="typename" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">Lexer</span><span class="punctuation">&lt;</span><span id="1864" class="typename" data-toggle="tooltip" data-title="S">S</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">private</span> <span id="1868" data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;[]">matchers</span><span class="punctuation">:</span> <a href="lexer.html#907"><span class="typename" data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">TokenMatcher</span></a><span class="punctuation">&lt;</span><a href="lexer.html#1864"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">[</span><span class="punctuation">]</span>
</code></pre>
<p>The constructor adds two flags to the regular expressions given as
arguments. The <code>y</code> flag makes the search sticky so that it scans the
input string from the position indicated by the <code>lastIndex</code> property.
The <code>u</code> flag makes the search support unicode characters.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span class="keyword">constructor</span><span class="punctuation">(</span><span class="punctuation">...</span><span id="2242" data-toggle="tooltip" data-title="[RegExp, S][]">tokens</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="typename" data-toggle="tooltip" data-title="RegExp">RegExp</span><span class="punctuation">,</span> <a href="lexer.html#1864"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">]</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1868"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;[]">matchers</span></a> <span class="punctuation">=</span> <a href="lexer.html#2242"><span data-toggle="tooltip" data-title="[RegExp, S][]">tokens</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="&lt;U&gt;(callbackfn: (value: [RegExp, S], index: number, array: [RegExp, S][]) =&gt; U, thisArg?: any) =&gt; U[]">map</span><span class="punctuation">(</span><span id="2306" data-toggle="tooltip" data-title="[RegExp, S]">t</span> <span class="punctuation">=&gt;</span> <span class="punctuation">(</span><span class="punctuation">{</span>
            <span id="2313" data-toggle="tooltip" data-title="RegExp">regex</span><span class="punctuation">:</span> <span class="keyword">new</span> <span class="typename" data-toggle="tooltip" data-title="RegExpConstructor">RegExp</span><span class="punctuation">(</span><a href="lexer.html#2306"><span data-toggle="tooltip" data-title="[RegExp, S]">t</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="string">&quot;yu&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span>
            <span id="2357" data-toggle="tooltip" data-title="S">token</span><span class="punctuation">:</span> <a href="lexer.html#2306"><span data-toggle="tooltip" data-title="[RegExp, S]">t</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span>
    <span class="punctuation">}</span>
</code></pre>
<p>We check matchers one-by-one in the order they were given to
recognize the token in the given position. If none of the matchers
succeed, we return <code>null</code>.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="2402" class="member" data-toggle="tooltip" data-title="(input: string, pos: number) =&gt; Token&lt;S&gt; | null">matchToken</span><span class="punctuation">(</span><span id="2616" data-toggle="tooltip" data-title="string">input</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="2630" data-toggle="tooltip" data-title="number">pos</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#1864"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span> <span class="punctuation">|</span> <span class="keyword">null</span> <span class="punctuation">{</span>
        <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="2680" data-toggle="tooltip" data-title="number">i</span> <span class="punctuation">=</span> <span class="number">0</span><span class="punctuation">;</span> <a href="lexer.html#2680"><span data-toggle="tooltip" data-title="number">i</span></a> <span class="punctuation">&lt;</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1868"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;[]">matchers</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">;</span> <a href="lexer.html#2680"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            <span class="keyword">let</span> <span id="2737" data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">matcher</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#1868"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;[]">matchers</span></a><span class="punctuation">[</span><a href="lexer.html#2680"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">]</span>
            <a href="lexer.html#2737"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">matcher</span></a><span class="punctuation">.</span><a href="lexer.html#1164"><span data-toggle="tooltip" data-title="RegExp">regex</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">lastIndex</span> <span class="punctuation">=</span> <a href="lexer.html#2630"><span data-toggle="tooltip" data-title="number">pos</span></a>
            <span class="keyword">let</span> <span id="2824" data-toggle="tooltip" data-title="RegExpExecArray | null">match</span> <span class="punctuation">=</span> <a href="lexer.html#2737"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">matcher</span></a><span class="punctuation">.</span><a href="lexer.html#1164"><span data-toggle="tooltip" data-title="RegExp">regex</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="lexer.html#2616"><span data-toggle="tooltip" data-title="string">input</span></a><span class="punctuation">)</span>
            <span class="keyword">if</span> <span class="punctuation">(</span><a href="lexer.html#2824"><span data-toggle="tooltip" data-title="RegExpExecArray | null">match</span></a> <span class="punctuation">!=</span> <span class="keyword">null</span><span class="punctuation">)</span>
                <span class="keyword">return</span> <span class="keyword">new</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="typeof Token">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#1864"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">(</span><a href="lexer.html#2737"><span data-toggle="tooltip" data-title="TokenMatcher&lt;S&gt;">matcher</span></a><span class="punctuation">.</span><a href="lexer.html#1183"><span data-toggle="tooltip" data-title="S">token</span></a><span class="punctuation">,</span> <a href="lexer.html#2824"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">)</span>
        <span class="punctuation">}</span>
        <span class="keyword">return</span> <span class="keyword">null</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="lexer-as-input">Lexer as Input</h2>
<p>We can integrate lexing directly into the parsing process by implementing
the <code>ParserInput</code> interface for any token. We don't expose <code>LexerInput</code>
class outside the module. It can be created with the <code>lexerInput</code> function.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">class</span> <span id="2994" class="typename" data-toggle="tooltip" data-title="LexerInput&lt;S&gt;">LexerInput</span><span class="punctuation">&lt;</span><span id="3286" class="typename" data-toggle="tooltip" data-title="S">S</span><span class="punctuation">&gt;</span> <span class="keyword">implements</span> <a href="lexer.html#817"><span data-toggle="tooltip" data-title="typeof inp">inp</span></a><span class="punctuation">.</span><a href="input.html#0"><span class="typename" data-toggle="tooltip" data-title="inp.ParserInput&lt;S&gt;">ParserInput</span></a><span class="punctuation">&lt;</span><a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
</code></pre>
<p>We define the fields of the <code>ParserInput</code> interface.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="3327" data-toggle="tooltip" data-title="number">position</span><span class="punctuation">:</span> <span class="keyword">number</span>
    <span id="3428" data-toggle="tooltip" data-title="Token&lt;S&gt;">current</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span>
    <span id="3451" data-toggle="tooltip" data-title="any">state</span><span class="punctuation">:</span> <span class="keyword">any</span>
</code></pre>
<p>We also need to store the input string and the lexer used. These we
get as an argument.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span class="keyword">private</span> <span id="3467" data-toggle="tooltip" data-title="string">input</span><span class="punctuation">:</span> <span class="keyword">string</span>
    <span class="keyword">private</span> <span id="3616" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span><span class="punctuation">:</span> <a href="lexer.html#1693"><span class="typename" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">Lexer</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span>
</code></pre>
<p>To avoid recognizing the same token multiple times as the parser
backtracks, we store all the tokens we have matched so far in
an array.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span class="keyword">private</span> <span id="3645" data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">[</span><span class="punctuation">]</span>
</code></pre>
<p>We store the result designating end of the input.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span class="keyword">private</span> <span id="3857" data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span>
</code></pre>
<p>Create an input stream for given string and lexer. Initialize the
instance variables.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span class="keyword">constructor</span><span class="punctuation">(</span><span id="4098" data-toggle="tooltip" data-title="string">input</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="4112" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span><span class="punctuation">:</span> <a href="lexer.html#1693"><span class="typename" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">Lexer</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">,</span> <span id="4129" data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3467"><span data-toggle="tooltip" data-title="string">input</span></a> <span class="punctuation">=</span> <a href="lexer.html#4098"><span data-toggle="tooltip" data-title="string">input</span></a>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3616"><span data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span></a> <span class="punctuation">=</span> <a href="lexer.html#4112"><span data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span></a>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3645"><span data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span></a> <span class="punctuation">=</span> <span class="keyword">new</span> <span class="typename" data-toggle="tooltip" data-title="ArrayConstructor">Array</span><span class="punctuation">&lt;</span><a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">&gt;</span><span class="punctuation">(</span><a href="lexer.html#4098"><span data-toggle="tooltip" data-title="string">input</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">)</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3327"><span data-toggle="tooltip" data-title="number">position</span></a> <span class="punctuation">=</span> <span class="punctuation">-</span><span class="number">1</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3857"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span></a> <span class="punctuation">=</span> <a href="lexer.html#4129"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span></a>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3428"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">current</span></a> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3857"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span></a>
    <span class="punctuation">}</span>
</code></pre>
<p>The iterator implementation is fairly straightforward. We need to make
sure that the state variables <code>position</code> and <code>current</code> are kept in sync
while we advance in the input string. We must also do a lookup in the
caché before calling the lexer to recognize the token. If the lexer finds
a match, we update the caché. If the lexer cannot recognize the next
token, we throw a <code>ParseError</code>.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="4351" class="member" data-toggle="tooltip" data-title="() =&gt; Token&lt;S&gt;">next</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#3286"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="4847" data-toggle="tooltip" data-title="number">pos</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3327"><span data-toggle="tooltip" data-title="number">position</span></a>
        <a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a> <span class="punctuation">+=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3645"><span data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span></a><span class="punctuation">[</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">]</span> <span class="punctuation">?</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3645"><span data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span></a><span class="punctuation">[</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">]</span><span class="punctuation">.</span><a href="lexer.html#1456"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span> <span class="punctuation">:</span> <span class="number">1</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a> <span class="punctuation">&gt;=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3467"><span data-toggle="tooltip" data-title="string">input</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">)</span>
            <span class="keyword">return</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3857"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span></a>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3327"><span data-toggle="tooltip" data-title="number">position</span></a> <span class="punctuation">=</span> <a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a>
        <span class="keyword">let</span> <span id="5045" data-toggle="tooltip" data-title="Token&lt;S&gt;">match</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3645"><span data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span></a><span class="punctuation">[</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">]</span> <span class="punctuation">||</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3616"><span data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span></a><span class="punctuation">.</span><a href="lexer.html#2402"><span class="member" data-toggle="tooltip" data-title="(input: string, pos: number) =&gt; Token&lt;S&gt; | null">matchToken</span></a><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3467"><span data-toggle="tooltip" data-title="string">input</span></a><span class="punctuation">,</span> <a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="lexer.html#5045"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">match</span></a><span class="punctuation">)</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> <a href="lexer.html#883"><span data-toggle="tooltip" data-title="typeof err">err</span></a><span class="punctuation">.</span><a href="error.html#265"><span class="typename" data-toggle="tooltip" data-title="typeof err.ParseError">ParseError</span></a><span class="punctuation">(</span><a href="lexer.html#883"><span data-toggle="tooltip" data-title="typeof err">err</span></a><span class="punctuation">.</span><a href="error.html#0"><span class="typename" data-toggle="tooltip" data-title="typeof err.ErrorSource">ErrorSource</span></a><span class="punctuation">.</span><a href="error.html#216"><span data-toggle="tooltip" data-title="err.ErrorSource.Lexer">Lexer</span></a><span class="punctuation">,</span> <a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">,</span>
                <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3467"><span data-toggle="tooltip" data-title="string">input</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(from: number, length?: number | undefined) =&gt; string">substr</span><span class="punctuation">(</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span> <span class="punctuation">+</span> <span class="string">&quot;...&quot;</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;&lt;valid token&gt;&quot;</span><span class="punctuation">]</span><span class="punctuation">)</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3645"><span data-toggle="tooltip" data-title="Token&lt;S&gt;[]">tokens</span></a><span class="punctuation">[</span><a href="lexer.html#4847"><span data-toggle="tooltip" data-title="number">pos</span></a><span class="punctuation">]</span> <span class="punctuation">=</span> <a href="lexer.html#5045"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">match</span></a>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="lexer.html#3428"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">current</span></a> <span class="punctuation">=</span> <a href="lexer.html#5045"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">match</span></a>
        <span class="keyword">return</span> <a href="lexer.html#5045"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">match</span></a>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<p>Create an input stream for given <code>text</code> string using the given <code>lexer</code>.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="5367" class="member" data-toggle="tooltip" data-title="&lt;S&gt;(text: string, lexer: Lexer&lt;S&gt;, eof: Token&lt;S&gt;) =&gt; inp.ParserInput&lt;Token&lt;S&gt;&gt;">lexerInput</span><span class="punctuation">&lt;</span><span id="5482" class="typename" data-toggle="tooltip" data-title="S">S</span><span class="punctuation">&gt;</span><span class="punctuation">(</span><span id="5485" data-toggle="tooltip" data-title="string">text</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="5498" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span><span class="punctuation">:</span> <a href="lexer.html#1693"><span class="typename" data-toggle="tooltip" data-title="Lexer&lt;S&gt;">Lexer</span></a><span class="punctuation">&lt;</span><a href="lexer.html#5482"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">,</span> <span id="5515" data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span><span class="punctuation">:</span> <a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#5482"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">)</span><span class="punctuation">:</span>
    <a href="lexer.html#817"><span data-toggle="tooltip" data-title="any">inp</span></a><span class="punctuation">.</span><a href="input.html#0"><span class="typename" data-toggle="tooltip" data-title="inp.ParserInput&lt;S&gt;">ParserInput</span></a><span class="punctuation">&lt;</span><a href="lexer.html#1200"><span class="typename" data-toggle="tooltip" data-title="Token&lt;S&gt;">Token</span></a><span class="punctuation">&lt;</span><a href="lexer.html#5482"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> <a href="lexer.html#2994"><span class="typename" data-toggle="tooltip" data-title="typeof LexerInput">LexerInput</span></a><span class="punctuation">&lt;</span><a href="lexer.html#5482"><span class="typename" data-toggle="tooltip" data-title="S">S</span></a><span class="punctuation">&gt;</span><span class="punctuation">(</span><a href="lexer.html#5485"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">,</span> <a href="lexer.html#5498"><span data-toggle="tooltip" data-title="Lexer&lt;S&gt;">lexer</span></a><span class="punctuation">,</span> <a href="lexer.html#5515"><span data-toggle="tooltip" data-title="Token&lt;S&gt;">eof</span></a><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>

        </div>
            <div class="sidepane narrow-scrollbars">
                
        <div class="pagemenu">
            <h3>On This Page</h3>
                <ul class="pagetree">
                </ul>
        </div>
            </div>
        </div>
        
        <div class="footer">
            <a class="footer-button" href="ref.html">
            <p>Previous</p>
            <p>« Reference Cells</p>
        </a>
            <div class="footer-text">
                <p>Copyright © 2020 Tommi Johtela</p>
                <p>Generated by 
                    <a href="https://johtela.github.io/litscript">LiTScript</a>
                </p>
            </div>
            <a class="footer-button" href="parser.html">
            <p>Next</p>
            <p>Parser Monad and Combinators »</p>
        </a>
        </div>
    
        <script src="../dist/normal.js"></script>
    </body>
    </html>